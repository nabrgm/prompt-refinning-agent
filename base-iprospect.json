{
  "nodes": [
    {
      "id": "seqStart_0",
      "position": {
        "x": -274.42417143514604,
        "y": -32.6752556894852
      },
      "type": "customNode",
      "data": {
        "id": "seqStart_0",
        "label": "Start",
        "version": 1,
        "name": "seqStart",
        "type": "Start",
        "baseClasses": [
          "Start"
        ],
        "category": "Sequential Agents",
        "description": "Starting point of the conversation",
        "inputParams": [],
        "inputAnchors": [
          {
            "label": "Chat Model",
            "name": "model",
            "type": "BaseChatModel",
            "description": "Only compatible with models that are capable of function calling: ChatOpenAI, ChatMistral, ChatAnthropic, ChatGoogleGenerativeAI, ChatVertexAI, GroqChat",
            "id": "seqStart_0-input-model-BaseChatModel"
          },
          {
            "label": "Agent Memory",
            "name": "agentMemory",
            "type": "BaseCheckpointSaver",
            "description": "Save the state of the agent",
            "optional": true,
            "id": "seqStart_0-input-agentMemory-BaseCheckpointSaver"
          },
          {
            "label": "State",
            "name": "state",
            "type": "State",
            "description": "State is an object that is updated by nodes in the graph, passing from one node to another. By default, state contains \"messages\" that got updated with each message sent and received.",
            "optional": true,
            "id": "seqStart_0-input-state-State"
          },
          {
            "label": "Input Moderation",
            "description": "Detect text that could generate harmful output and prevent it from being sent to the language model",
            "name": "inputModeration",
            "type": "Moderation",
            "optional": true,
            "list": true,
            "id": "seqStart_0-input-inputModeration-Moderation"
          }
        ],
        "inputs": {
          "model": "{{ChatBaseten_0.data.instance}}",
          "agentMemory": "{{appDbAgentMemory_0.data.instance}}",
          "state": "{{seqState_0.data.instance}}",
          "inputModeration": ""
        },
        "outputAnchors": [
          {
            "id": "seqStart_0-output-seqStart-Start",
            "name": "seqStart",
            "label": "Start",
            "description": "Starting point of the conversation",
            "type": "Start"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 383,
      "selected": false,
      "positionAbsolute": {
        "x": -274.42417143514604,
        "y": -32.6752556894852
      },
      "dragging": false
    },
    {
      "id": "seqState_0",
      "position": {
        "x": -737.2849852588399,
        "y": 179.49229517480552
      },
      "type": "customNode",
      "data": {
        "id": "seqState_0",
        "label": "State",
        "version": 1,
        "name": "seqState",
        "type": "State",
        "baseClasses": [
          "State"
        ],
        "category": "Sequential Agents",
        "description": "A centralized state object, updated by nodes in the graph, passing from one node to another",
        "inputParams": [
          {
            "label": "Custom State",
            "name": "stateMemory",
            "type": "tabs",
            "tabIdentifier": "selectedStateTab",
            "additionalParams": true,
            "default": "stateMemoryUI",
            "tabs": [
              {
                "label": "Custom State (Table)",
                "name": "stateMemoryUI",
                "type": "datagrid",
                "description": "Structure for state. By default, state contains \"messages\" that got updated with each message sent and received.",
                "hint": {
                  "label": "How to use",
                  "value": "\nSpecify the Key, Operation Type, and Default Value for the state object. The Operation Type can be either \"Replace\" or \"Append\".\n\n**Replace**\n- Replace the existing value with the new value.\n- If the new value is null, the existing value will be retained.\n\n**Append**\n- Append the new value to the existing value.\n- Default value can be empty or an array. Ex: [\"a\", \"b\"]\n- Final value is an array.\n"
                },
                "datagrid": [
                  {
                    "field": "key",
                    "headerName": "Key",
                    "editable": true
                  },
                  {
                    "field": "type",
                    "headerName": "Operation",
                    "type": "singleSelect",
                    "valueOptions": [
                      "Replace",
                      "Append"
                    ],
                    "editable": true
                  },
                  {
                    "field": "defaultValue",
                    "headerName": "Default Value",
                    "flex": 1,
                    "editable": true
                  }
                ],
                "optional": true,
                "additionalParams": true
              },
              {
                "label": "Custom State (Code)",
                "name": "stateMemoryCode",
                "type": "code",
                "description": "JSON object representing the state",
                "hideCodeExecute": true,
                "codeExample": "{\n    aggregate: {\n        value: (x, y) => x.concat(y), // here we append the new message to the existing messages\n        default: () => []\n    }\n}",
                "optional": true,
                "additionalParams": true
              }
            ],
            "id": "seqState_0-input-stateMemory-tabs"
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "stateMemory": "stateMemoryUI",
          "stateMemoryUI": "[{\"key\":\"firstName\",\"type\":\"Replace\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":0},{\"key\":\"lastName\",\"type\":\"Replace\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":1},{\"key\":\"customerType\",\"type\":\"Replace\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":2},{\"key\":\"preferredApptTime\",\"type\":\"Replace\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":3},{\"key\":\"preferredApptDate\",\"type\":\"Replace\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":4},{\"key\":\"preferredApptTimezone\",\"type\":\"Replace\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":5},{\"key\":\"intent\",\"type\":\"Replace\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":6},{\"key\":\"brand_name\",\"type\":\"Replace\",\"defaultValue\":\"Comcast Business\",\"actions\":\"\",\"id\":7},{\"key\":\"brand_voice_description\",\"type\":\"Replace\",\"defaultValue\":\"- Warm, approachable, and professional - like a helpful business consultant. - Conversational but respectful of their time - get to the point while being friendly. - Use natural language and contractions (I'd be happy to, Let's get you set up). - Acknowledge what they said before responding - show you're listening. - Confident and knowledgeable about Comcast Business services. - Patient and understanding - especially if they're frustrated or confused. - Avoid sounding scripted or robotic - respond to what they actually said. - Keep responses concise for SMS - respect the format.\",\"actions\":\"\",\"id\":8},{\"key\":\"brand_support_link\",\"type\":\"Replace\",\"defaultValue\":\"https://business.comcast.com/support/home/\",\"actions\":\"\",\"id\":9},{\"key\":\"brand_business_hours\",\"type\":\"Replace\",\"defaultValue\":\"Monday-Friday 9am-10pm\",\"actions\":\"\",\"id\":10},{\"key\":\"brand_business_timezone\",\"type\":\"Replace\",\"defaultValue\":\"Eastern\",\"actions\":\"\",\"id\":11},{\"key\":\"brand_allowed_domains\",\"type\":\"Replace\",\"defaultValue\":\"comcastbusinessoffers.com, business.comcast.com\",\"actions\":\"\",\"id\":12},{\"key\":\"brand_service_regions\",\"type\":\"Replace\",\"defaultValue\":\"US\",\"actions\":\"\",\"id\":13},{\"key\":\"brand_system_base\",\"type\":\"Replace\",\"defaultValue\":\" PERSONA GUIDELINES   Identity & Pronouns      - Refer to yourself as \\\"I\\\" or \\\"me\\\".      - Refer to {brand_name}  as \\\"we\\\" or \\\"our\\\".      - NEVER refer to the company as \\\"they\\\".   Voice & Tone      - Default: Professional, helpful, clear, and calm.  COMMUNICATION RULES Brevity & Formatting      - Chat Length: Keep responses short and concise      - SMS Length: STRICT limit of 160 characters per message.      - Plain Text Only: Do not use Markdown bold/italic or HTML/XML tags       - No Emojis: Do not use emojis.  Language      - Use simple, plain language. Avoid jargon and fluff.      - Acronyms: Define uncommon acronyms on first use (e.g., \\\"Natural Language Processing (NLP)\\\").      - Numbers: Spell out 1-9; use digits for 10+. Use \\\"%\\\" symbol, not \\\"percent\\\".      - Style: Follow AP Style (Sentence case for titles, Oxford comma).  Interaction Flow      - One Concept at a Time: Ask only ONE question per turn to avoid overwhelming the user.      - Name Usage: Use the user's first name naturally (max 2 times per session). If unknown, use neutral \\\"you/your\\\".      - Directness: Skip generic greetings (\\\"Hello, how are you?\\\") if the user has already stated a need. Address the need immediately.  KNOWLEDGE AND TOOL USE Grounding & Anti-Hallucination (CRITICAL)      - NEVER invent links, URLs, or facts.      - Research First: Always use the provided Research/Search Tool to find live, valid information before answering questions about company resources, articles, or policies.      - Fact Check: If the tool returns no results, admit it or provide general guidance. Do not make up a resource.  Link Sharing      - Share strictly ONE link per response.      - Use plain text URLs (e.g., https://example.com), not clickable Markdown.      - Ensure URLs are valid (Status 200) and regionally appropriate (e.g., match user's country code).  OPERATIONAL PROTOCOLS Scheduling & Conversions      - Intent-Based: Only offer to schedule/convert if the user shows clear interest or asks.      - Business Logic: Appointments must be next-day or later, not the same day.  Out-of-Scope Handling      - If a user asks for unsupported services or requests, politely decline. Do not attempt to \\\"hack\\\" a solution, and stick to your goals.  Sensitive Data (PII)      - Warn the user not to share sensitive info in chat.  Escalation      - Triggers: Misunderstanding x2, explicit request for human, or high user frustration.      - Action: Apologize for the limitation -> Offer structured options. We do not offer handoff to human agents.  Error Recovery      - User Misunderstanding: \\\"My apologies, I didn't quite understand that. Could you clarify?\\\"      - System Error: \\\"We're having trouble right now, please try again later.\\\"  {additional_general_rules}\",\"actions\":\"\",\"id\":14},{\"key\":\"search_needed\",\"type\":\"Replace\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":15},{\"key\":\"intent\",\"type\":\"\",\"defaultValue\":\"\",\"actions\":\"\",\"id\":16},{\"key\":\"additional_customers_rules\",\"type\":\"Replace\",\"defaultValue\":\"EXISTING CUSTOMER ROUTING: SCHEDULE CALLBACK FOR: Contract renewals, Address changes or relocations, Adding new locations, Service upgrades, New service additions. DIRECT TO SUPPORT LINK FOR: Technical issues (internet down, slow speeds, connection problems), Billing questions or disputes, Account access issues, Equipment problems (router, modem, cable box), Service outages. SUPPORT LINK: https://business.comcast.com/support/home/ - Available 24/7. RESPONSE FOR SUPPORT ISSUES: For technical or billing help, our support team can access your account directly. Head to https://business.comcast.com/support/home/ or call our 24/7 support line and they'll get you sorted out. EMPATHY FIRST: Acknowledge any frustration before redirecting. I hear you - that's frustrating.\",\"actions\":\"\",\"id\":17},{\"key\":\"additional_prospects_rules\",\"type\":\"Replace\",\"defaultValue\":\"GOAL: Capture lead name and schedule a callback appointment. LEAD QUALIFICATION: Confirm this is for a business (not residential). Capture their name if not already provided. The Business Class Sales Agent will handle address verification. APPOINTMENT SCHEDULING: Ask for preferred date and time. Confirm their timezone. Remind them: You'll get a text with the number to call about 5 minutes before your appointment. HANDLING QUESTIONS: For detailed product or pricing questions, use the deflection response to guide toward scheduling. Keep the focus on getting them connected with a Business Class agent who can provide full details. RAPPORT: Be personable and genuine. Acknowledge their business needs. Keep the conversation moving toward scheduling without being pushy.\",\"actions\":\"\",\"id\":18},{\"key\":\"additional_general_rules\",\"type\":\"Replace\",\"defaultValue\":\"LANGUAGE REQUIREMENT: If the consumer is not communicating in English, politely explain: I'm only able to assist in English right now. Would you like me to send you our support link where you might find more options? Then stop the interaction if they cannot continue in English. COMPETITOR HANDLING: If a consumer mentions or asks about competitors (AT&T, Verizon, Spectrum, Cox, etc.), do not engage with comparisons or discuss competitor services. Politely redirect: I can only speak to what we offer at Comcast Business. Want me to help you explore our options? RESIDENTIAL CUSTOMER HANDLING: If someone is looking for home or residential internet service (not business), they are in the wrong place. Response: It sounds like you're looking for home internet service. I handle business accounts here. For residential services, you'd want to visit xfinity.com or call Xfinity residential support. If they have billing questions about residential service, direct them to Xfinity support, not Comcast Business support. TOPICS TO DEFLECT TO SALES AGENT (DO NOT ANSWER DIRECTLY): When a customer asks about ANY of the following, do NOT provide details. Instead, offer to schedule a call: Specific pricing, plans, or packages for Cable, Phone, or Internet. Virtual Business Card questions. What happens after receiving a quote or next steps in the process. Detailed questions about what services are offered or bundling options. Gift Card promotions or offers. Add-on services or features. DEFLECTION RESPONSE: Our Business Class agent can help provide more information on that. Can I schedule a call so we can help with your request? SCHEDULING FLOW: When scheduling, ask for their preferred date, time, and timezone. Appointments must be scheduled for the next business day or later (not same day). Business hours for appointments: Monday-Friday 9am-10pm Eastern. After scheduling: You'll receive a text with the phone number to call about 5 minutes before your scheduled time. Important: The customer will CALL US at the scheduled time. We do not call them. SUPPORT VS SALES ROUTING: Technical issues, billing problems, service outages, equipment issues - Direct to support: https://business.comcast.com/support/home/. New service, renewals, upgrades, address changes, adding locations - Schedule a callback.\",\"actions\":\"\",\"id\":19},{\"key\":\"qa_pairs\",\"type\":\"Replace\",\"defaultValue\":\"Q: What internet speeds do you offer? A: We offer speeds ranging from 50 Mbps up to 1.25 Gbps depending on your location. Our Business Class agent can go over the specific options available at your address - want me to schedule a call? Q: Do you have business phone service? A: Yes, we offer business voice with features like unlimited calling, caller ID, voicemail, and more. I can schedule a call with our team to discuss the options that fit your business. Q: What TV packages do you have? A: We have packages ranging from basic local channels up to 139+ channels through our X1 for Business platform. A Business Class agent can walk you through the options - should I set up a call? Q: Can I bundle services? A: Yes, bundling internet, phone, and TV is available. Our Business Class agent can put together a package and pricing for you - can I schedule a call? Q: What areas do you service? A: Comcast Business serves most areas across the US. Give me your business address and we can confirm availability. Q: Is there a contract required? A: Contract terms vary by service. Our Business Class agent can explain all the options - want me to schedule a call to discuss? Q: Do you offer ethernet or dedicated internet? A: Yes, we offer Ethernet Dedicated Internet for businesses that need high-capacity bandwidth. Speeds range from 1 Mbps up to 100 Gbps. I can schedule a call with our team to discuss your needs. Q: What is the 24/7 support number? A: For existing customers needing support, visit https://business.comcast.com/support/home/ or call our 24/7 support line. Q: How do I get support for my existing service? A: Head to https://business.comcast.com/support/home/ where you can chat online, browse support articles, or get phone support 24/7. Q: What add-ons are available? A: We have add-ons like Connection Pro (backup connectivity), WiFi Pro, and SecurityEdge. Our Business Class agent can explain these - should I schedule a call? Q: Is there a gift card promotion? A: We do have promotions available on qualifying offers. Our Business Class agent can tell you what's currently available - can I schedule a call? Q: What happens after I get a quote? A: Our Business Class agent can walk you through the full process. Want me to schedule a call so they can explain everything?\",\"actions\":\"\",\"id\":20}]",
          "selectedStateTab_seqState_0": "stateMemoryUI"
        },
        "outputAnchors": [
          {
            "id": "seqState_0-output-seqState-State",
            "name": "seqState",
            "label": "State",
            "description": "A centralized state object, updated by nodes in the graph, passing from one node to another",
            "type": "State"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 256,
      "selected": false,
      "positionAbsolute": {
        "x": -737.2849852588399,
        "y": 179.49229517480552
      },
      "dragging": false
    },
    {
      "id": "seqLLMNode_0",
      "position": {
        "x": 186.90460557715312,
        "y": -97.6333445314719
      },
      "type": "customNode",
      "data": {
        "id": "seqLLMNode_0",
        "label": "LLM Node",
        "version": 1.1,
        "name": "seqLLMNode",
        "type": "LLMNode",
        "baseClasses": [
          "LLMNode"
        ],
        "category": "Sequential Agents",
        "description": "Run Chat Model and return the output",
        "inputParams": [
          {
            "label": "Name",
            "name": "llmNodeName",
            "type": "string",
            "placeholder": "LLM",
            "id": "seqLLMNode_0-input-llmNodeName-string"
          },
          {
            "label": "System Prompt",
            "name": "systemMessagePrompt",
            "type": "string",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "seqLLMNode_0-input-systemMessagePrompt-string"
          },
          {
            "label": "Human Prompt",
            "name": "humanMessagePrompt",
            "type": "string",
            "description": "This prompt will be added at the end of the messages as human message",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "seqLLMNode_0-input-humanMessagePrompt-string"
          },
          {
            "label": "Messages History",
            "name": "messageHistory",
            "description": "Return a list of messages between System Prompt and Human Prompt. This is useful when you want to provide few shot examples",
            "type": "code",
            "hideCodeExecute": true,
            "codeExample": "const { AIMessage, HumanMessage, ToolMessage } = require('@langchain/core/messages');\n\nreturn [\n    new HumanMessage(\"What is 333382 ðŸ¦œ 1932?\"),\n    new AIMessage({\n        content: \"\",\n        tool_calls: [\n        {\n            id: \"12345\",\n            name: \"calulator\",\n            args: {\n                number1: 333382,\n                number2: 1932,\n                operation: \"divide\",\n            },\n        },\n        ],\n    }),\n    new ToolMessage({\n        tool_call_id: \"12345\",\n        content: \"The answer is 172.558.\",\n    }),\n    new AIMessage(\"The answer is 172.558.\"),\n]",
            "optional": true,
            "additionalParams": true,
            "id": "seqLLMNode_0-input-messageHistory-code"
          },
          {
            "label": "Include Output in Agent Memory",
            "name": "includeOutputInAgentMemory",
            "type": "boolean",
            "default": true,
            "description": "Include messages generated by this node in Agent Memory if available",
            "id": "seqLLMNode_0-input-includeOutputInAgentMemory-boolean"
          },
          {
            "label": "Format Prompt Values",
            "name": "promptValues",
            "description": "Assign values to the prompt variables. You can also use $this.state.<variable-name> to get the state value",
            "type": "json",
            "optional": true,
            "acceptVariable": true,
            "list": true,
            "additionalParams": true,
            "id": "seqLLMNode_0-input-promptValues-json"
          },
          {
            "label": "JSON Structured Output",
            "name": "llmStructuredOutput",
            "type": "datagrid",
            "description": "Instruct the LLM to give output in a JSON structured schema",
            "datagrid": [
              {
                "field": "key",
                "headerName": "Key",
                "editable": true
              },
              {
                "field": "type",
                "headerName": "Type",
                "type": "singleSelect",
                "valueOptions": [
                  "String",
                  "String Array",
                  "Number",
                  "Boolean",
                  "Enum"
                ],
                "editable": true
              },
              {
                "field": "enumValues",
                "headerName": "Enum Values",
                "editable": true
              },
              {
                "field": "description",
                "headerName": "Description",
                "flex": 1,
                "editable": true
              }
            ],
            "optional": true,
            "additionalParams": true,
            "id": "seqLLMNode_0-input-llmStructuredOutput-datagrid"
          },
          {
            "label": "Update State",
            "name": "updateStateMemory",
            "type": "tabs",
            "tabIdentifier": "selectedUpdateStateMemoryTab",
            "default": "updateStateMemoryUI",
            "additionalParams": true,
            "tabs": [
              {
                "label": "Update State (Table)",
                "name": "updateStateMemoryUI",
                "type": "datagrid",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Key and value pair to be updated. For example: if you have the following State:\n    | Key       | Operation     | Default Value     |\n    |-----------|---------------|-------------------|\n    | user      | Replace       |                   |\n\n    You can update the \"user\" value with the following:\n    | Key       | Value     |\n    |-----------|-----------|\n    | user      | john doe  |\n\n2. If you want to use the LLM Node's output as the value to update state, it is available as available as `$this.output` with the following structure:\n    ```json\n    {\n        \"content\": 'Hello! How can I assist you today?',\n        \"name\": \"\",\n        \"additional_kwargs\": {},\n        \"response_metadata\": {},\n        \"tool_calls\": [],\n        \"invalid_tool_calls\": [],\n        \"usage_metadata\": {}\n    }\n    ```\n\n    For example, if the output `content` is the value you want to update the state with, you can do the following:\n    | Key       | Value                     |\n    |-----------|---------------------------|\n    | user      | `$this.output.content`  |\n\n3. You can get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "description": "This is only applicable when you have a custom State at the START node. After agent execution, you might want to update the State values",
                "datagrid": [
                  {
                    "field": "key",
                    "headerName": "Key",
                    "type": "asyncSingleSelect",
                    "loadMethod": "loadStateKeys",
                    "flex": 0.5,
                    "editable": true
                  },
                  {
                    "field": "value",
                    "headerName": "Value",
                    "type": "freeSolo",
                    "valueOptions": [
                      {
                        "label": "LLM Node Output (string)",
                        "value": "$this.output.content"
                      },
                      {
                        "label": "LLM JSON Output Key (string)",
                        "value": "$this.output.<replace-with-key>"
                      },
                      {
                        "label": "Global variable (string)",
                        "value": "$vars.<variable-name>"
                      },
                      {
                        "label": "Input Question (string)",
                        "value": "$this.input"
                      },
                      {
                        "label": "Session Id (string)",
                        "value": "$this.sessionId"
                      },
                      {
                        "label": "Chat Id (string)",
                        "value": "$this.chatId"
                      },
                      {
                        "label": "Workflow Id (string)",
                        "value": "$this.workflowId"
                      }
                    ],
                    "editable": true,
                    "flex": 1
                  }
                ],
                "optional": true,
                "additionalParams": true
              },
              {
                "label": "Update State (Code)",
                "name": "updateStateMemoryCode",
                "type": "code",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Return the key value JSON object. For example: if you have the following State:\n    ```json\n    {\n        \"user\": null\n    }\n    ```\n\n    You can update the \"user\" value by returning the following:\n    ```js\n    return {\n        \"user\": \"john doe\"\n    }\n    ```\n\n2. If you want to use the LLM Node's output as the value to update state, it is available as `$this.output` with the following structure:\n    ```json\n    {\n        \"content\": 'Hello! How can I assist you today?',\n        \"name\": \"\",\n        \"additional_kwargs\": {},\n        \"response_metadata\": {},\n        \"tool_calls\": [],\n        \"invalid_tool_calls\": [],\n        \"usage_metadata\": {}\n    }\n    ```\n\n    For example, if the output `content` is the value you want to update the state with, you can return the following:\n    ```js\n    return {\n        \"user\": $this.output.content\n    }\n    ```\n\n3. You can also get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "description": "This is only applicable when you have a custom State at the START node. After agent execution, you might want to update the State values. Must return an object representing the state",
                "hideCodeExecute": true,
                "codeExample": "const result = $this.output;\n\n/* Suppose we have a custom State schema like this:\n* {\n    aggregate: {\n        value: (x, y) => x.concat(y),\n        default: () => []\n    }\n  }\n*/\n\nreturn {\n  aggregate: [result.content]\n};",
                "optional": true,
                "additionalParams": true
              }
            ],
            "id": "seqLLMNode_0-input-updateStateMemory-tabs"
          }
        ],
        "inputAnchors": [
          {
            "label": "Start | Agent | Condition | LLM | Tool Node",
            "name": "sequentialNode",
            "type": "Start | Agent | Condition | LLMNode | ToolNode",
            "list": true,
            "id": "seqLLMNode_0-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode"
          },
          {
            "label": "Chat Model",
            "name": "model",
            "type": "BaseChatModel",
            "optional": true,
            "description": "Overwrite model to be used for this node",
            "id": "seqLLMNode_0-input-model-BaseChatModel"
          }
        ],
        "inputs": {
          "llmNodeName": "Metadata Identifier",
          "systemMessagePrompt": "You are an information extraction assistant. Analyze the latest user message and conversation history to extract specific details. Return a JSON object with these exact top-level keys:\n\n\"firstName\": string | null,\n\"lastName\": string | null,\n\"customerType\": \"new_sales_lead\" | \"existing_customer\" | \"undetermined\",\n\"intent\": string | null\n\nEXTRACTION RULES:\n\nNames:\nâ€¢ PRESERVE honorifics (Dr., Mr., Ms., Mrs., Miss, etc.) in the \"firstName\" field\nâ€¢ If honorific is present: Include it with the first name (e.g., \"Dr. Michael\" or \"Dr. Mike\")\nâ€¢ If only one name provided with honorific: assign honorific + name to \"firstName\", set \"lastName\" to null\nâ€¢ If full name with honorific provided: assign honorific + first name to \"firstName\", last name to \"lastName\"\nâ€¢ Examples:\n  - \"Dr. Mike Johnson\" â†’ firstName: \"Dr. Mike\", lastName: \"Johnson\"\n  - \"Miss Sarah\" â†’ firstName: \"Miss Sarah\", lastName: null\n  - \"Mr. Smith\" â†’ firstName: \"Mr.\", lastName: \"Smith\"\n  - \"Dr. Robinson\" â†’ firstName: \"Dr.\", lastName: \"Robinson\"\nâ€¢ If no name provided: both null\n\nSCHEDULING INTENT DETECTION (HIGHEST PRIORITY - CHECK FIRST):\nâ€¢ If the user expresses ANY intent to schedule, book, or set up a call/appointment, ALWAYS set customerType to \"new_sales_lead\" regardless of other signals or previous classification.\nâ€¢ Scheduling signals include:\n  - Words: \"schedule\", \"book\", \"set up a call\", \"appointment\", \"callback\", \"call me\", \"talk to someone\"\n  - \"yes\" or affirmative response after being asked about scheduling\n  - \"what times are available\", \"when can I talk to someone\", \"when can someone call\"\n  - Any indication they want to speak with an agent or representative\nâ€¢ When scheduling intent is detected:\n  - customerType: \"new_sales_lead\" (OVERRIDE any other classification including existing_customer)\n  - intent: \"schedule appointment\"\n\ncustomerType (REQUIRED - must be one of three values):\ncurrent customerType is {customerType}\nâ€¢ CRITICAL PERSISTENCE RULE: Once customerType is determined as \"new_sales_lead\" or \"existing_customer\" in the conversation history, it MUST remain the same for all subsequent messages unless there is EXPLICIT evidence the user is correcting their status.\nâ€¢ EXCEPTION: If scheduling intent is detected (see above), ALWAYS override to \"new_sales_lead\"\nâ€¢ Review the ENTIRE conversation history to check if customerType was already determined in a previous extraction.\nâ€¢ If previously set to \"new_sales_lead\" or \"existing_customer\", maintain that exact same value even if the current message is ambiguous, generic, or conversational (like \"hi\", \"hello\", \"thanks\", \"okay\", \"yes\").\nâ€¢ Only change customerType from a previously determined value if:\n  - The user explicitly corrects their status (e.g., \"Actually, I'm already a customer\" or \"Wait, I don't have an account yet\")\n  - There is clear contradictory evidence that the initial classification was wrong\n  - SCHEDULING INTENT IS DETECTED (always becomes new_sales_lead)\nâ€¢ If no previous customerType was determined (all previous were \"undetermined\"), then classify based on current context:\n  - \"new_sales_lead\": Potential client without an account seeking to purchase services\n    Examples: switching providers, asking about pricing/plans, service availability, installation inquiries, expressing interest in services, wants to schedule\n  - \"existing_customer\": Current client with an existing account\n    Examples: billing issues, technical support, mentions account number, upgrade requests, service problems\n  - \"undetermined\": Cannot determine from context AND no previous determination exists\nâ€¢ This field is mandatory and must always have one of these three values\n\nintent:\ncurrent intent is {intent}\nâ€¢ CRITICAL PERSISTENCE RULE: Review the ENTIRE conversation history to understand the user's primary intent.\nâ€¢ If an intent was already determined in previous messages, maintain that intent UNLESS:\n  - The user explicitly changes the topic or introduces a NEW primary intent\n  - The user provides NEW information that clarifies or refines their original intent\n  - The conversation has clearly shifted to a different purpose\n  - SCHEDULING INTENT IS DETECTED (update to \"schedule appointment\")\nâ€¢ When the current message adds details or continues the same topic, KEEP the existing intent\nâ€¢ When the current message is just conversational filler (like \"hi\", \"okay\", \"yes\", \"thanks\"), KEEP the existing intent\nâ€¢ Only UPDATE the intent when:\n  - New substantive information reveals a different or more specific intent\n  - The user explicitly shifts to a new topic or request\n  - The current message provides clarity that changes the understanding of their goal\nâ€¢ Format: 2-3 words describing the user's primary intent\nâ€¢ Examples: \"schedule appointment\", \"billing inquiry\", \"technical support\", \"pricing information\", \"general greeting\", \"expressing interest\"\nâ€¢ null if intent unclear AND no previous intent was determined\n\nCRITICAL: Return ONLY the stringified JSON object. No markdown, no code blocks, no explanatory text.",
          "humanMessagePrompt": "Detect any of these values and generate the JSON as specified above.",
          "messageHistory": "",
          "sequentialNode": [
            "{{seqStart_0.data.instance}}"
          ],
          "model": "",
          "includeOutputInAgentMemory": false,
          "promptValues": "{\"customerType\":\"$this.state.customerType\",\"intent\":\"$this.state.intent\"}",
          "llmStructuredOutput": "[{\"key\":\"firstName\",\"type\":\"String\",\"enumValues\":\"\",\"description\":\"Consumer's first name\",\"actions\":\"\",\"id\":0},{\"key\":\"lastName\",\"type\":\"String\",\"enumValues\":\"\",\"description\":\"Consumer's Last Name\",\"actions\":\"\",\"id\":1},{\"key\":\"customerType\",\"type\":\"Enum\",\"enumValues\":\"new_sales_lead,existing_customer,undetermined\",\"description\":\"Consumer's Type\",\"actions\":\"\",\"id\":2},{\"key\":\"intent\",\"type\":\"String\",\"enumValues\":\"\",\"description\":\"Consumer's intent\",\"actions\":\"\",\"id\":3}]",
          "updateStateMemory": "updateStateMemoryUI",
          "selectedUpdateStateMemoryTab_seqLLMNode_0": "updateStateMemoryCode",
          "updateStateMemoryCode": "// Try accessing the full output object\nconst fullOutput = $this.output;\n\n// The metadata might be in different locations\nconst parsedData = fullOutput?.content || fullOutput || {};\n\nconsole.log(\"Full output:\", JSON.stringify(fullOutput));\n\nreturn {\n    firstName: parsedData.firstName || \"\",\n    lastName: parsedData.lastName || \"\",\n    customerType: parsedData.customerType || \"undetermined\",\n    intent: parsedData.intent || \"\",\n};"
        },
        "outputAnchors": [
          {
            "id": "seqLLMNode_0-output-seqLLMNode-LLMNode",
            "name": "seqLLMNode",
            "label": "LLMNode",
            "description": "Run Chat Model and return the output",
            "type": "LLMNode"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 570,
      "selected": false,
      "positionAbsolute": {
        "x": 186.90460557715312,
        "y": -97.6333445314719
      },
      "dragging": false
    },
    {
      "id": "seqCondition_0",
      "position": {
        "x": 635.7619064644309,
        "y": -96.93664768894513
      },
      "type": "customNode",
      "data": {
        "id": "seqCondition_0",
        "label": "Condition",
        "version": 1,
        "name": "seqCondition",
        "type": "Condition",
        "baseClasses": [
          "Condition"
        ],
        "category": "Sequential Agents",
        "description": "Conditional function to determine which route to take next",
        "inputParams": [
          {
            "label": "Condition Name",
            "name": "conditionName",
            "type": "string",
            "optional": true,
            "placeholder": "If X, then Y",
            "id": "seqCondition_0-input-conditionName-string"
          },
          {
            "label": "Condition",
            "name": "condition",
            "type": "conditionFunction",
            "tabIdentifier": "selectedConditionFunctionTab",
            "tabs": [
              {
                "label": "Condition (Table)",
                "name": "conditionUI",
                "type": "datagrid",
                "description": "If a condition is met, the node connected to the respective output will be executed",
                "optional": true,
                "datagrid": [
                  {
                    "field": "variable",
                    "headerName": "Variable",
                    "type": "freeSolo",
                    "editable": true,
                    "loadMethod": [
                      "getPreviousMessages",
                      "loadStateKeys"
                    ],
                    "valueOptions": [
                      {
                        "label": "Total Messages (number)",
                        "value": "$this.state.messages.length"
                      },
                      {
                        "label": "First Message Content (string)",
                        "value": "$this.state.messages[0].content"
                      },
                      {
                        "label": "Last Message Content (string)",
                        "value": "$this.state.messages[-1].content"
                      },
                      {
                        "label": "Global variable (string)",
                        "value": "$vars.<variable-name>"
                      }
                    ],
                    "flex": 0.5,
                    "minWidth": 200
                  },
                  {
                    "field": "operation",
                    "headerName": "Operation",
                    "type": "singleSelect",
                    "valueOptions": [
                      "Contains",
                      "Not Contains",
                      "Start With",
                      "End With",
                      "Is",
                      "Is Not",
                      "Is Empty",
                      "Is Not Empty",
                      "Greater Than",
                      "Less Than",
                      "Equal To",
                      "Not Equal To",
                      "Greater Than or Equal To",
                      "Less Than or Equal To"
                    ],
                    "editable": true,
                    "flex": 0.4,
                    "minWidth": 150
                  },
                  {
                    "field": "value",
                    "headerName": "Value",
                    "flex": 1,
                    "editable": true
                  },
                  {
                    "field": "output",
                    "headerName": "Output Name",
                    "editable": true,
                    "flex": 0.3,
                    "minWidth": 150
                  }
                ]
              },
              {
                "label": "Condition (Code)",
                "name": "conditionFunction",
                "type": "code",
                "description": "Function to evaluate the condition",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Must return a string value at the end of function. For example:\n    ```js\n    if (\"X\" === \"X\") {\n        return \"Agent\"; // connect to next agent node\n    } else {\n        return \"End\"; // connect to end node\n    }\n    ```\n\n2. In most cases, you would probably get the last message to do some comparison. You can get all current messages from the state: `$this.state.messages`:\n    ```json\n    [\n        {\n            \"content\": \"Hello! How can I assist you today?\",\n            \"name\": \"\",\n            \"additional_kwargs\": {},\n            \"response_metadata\": {},\n            \"tool_calls\": [],\n            \"invalid_tool_calls\": [],\n            \"usage_metadata\": {}\n        }\n    ]\n    ```\n\n    For example, to get the last message content:\n    ```js\n    const messages = $this.state.messages;\n    const lastMessage = messages[messages.length - 1];\n\n    // Proceed to do something with the last message content\n    ```\n\n3. You can get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "hideCodeExecute": true,
                "codeExample": "const state = $this.state;\n                \nconst messages = state.messages;\n\nconst lastMessage = messages[messages.length - 1];\n\n/* Check if the last message has content */\nif (lastMessage.content) {\n    return \"Agent\";\n}\n\nreturn \"End\";",
                "optional": true
              }
            ],
            "id": "seqCondition_0-input-condition-conditionFunction"
          }
        ],
        "inputAnchors": [
          {
            "label": "Start | Agent | LLM | Tool Node",
            "name": "sequentialNode",
            "type": "Start | Agent | LLMNode | ToolNode",
            "list": true,
            "id": "seqCondition_0-input-sequentialNode-Start | Agent | LLMNode | ToolNode"
          }
        ],
        "inputs": {
          "conditionName": "Router",
          "sequentialNode": [
            "{{seqLLMNode_0.data.instance}}"
          ],
          "condition": "",
          "conditionUI": "[{\"variable\":\"$this.state.customerType\",\"operation\":\"Is\",\"value\":\"new_sales_lead\",\"output\":\"new_sales_lead\",\"actions\":\"\",\"id\":0},{\"variable\":\"$this.state.customerType\",\"operation\":\"Is\",\"value\":\"existing_customer\",\"output\":\"existing_customer\",\"actions\":\"\",\"id\":1},{\"variable\":\"$this.state.customerType\",\"operation\":\"Is\",\"value\":\"undetermined\",\"output\":\"undetermined\",\"actions\":\"\",\"id\":2}]",
          "selectedConditionFunctionTab_seqCondition_0": "conditionUI"
        },
        "outputAnchors": [
          {
            "name": "output",
            "label": "Output",
            "type": "options",
            "options": [
              {
                "id": "seqCondition_0-output-end-Condition",
                "name": "end",
                "label": "End",
                "type": "Condition",
                "isAnchor": true
              },
              {
                "id": "seqCondition_0-output-existing_customer-Condition",
                "name": "existing_customer",
                "label": "existing_customer",
                "type": "Condition",
                "isAnchor": true
              },
              {
                "id": "seqCondition_0-output-new_sales_lead-Condition",
                "name": "new_sales_lead",
                "label": "new_sales_lead",
                "type": "Condition",
                "isAnchor": true
              },
              {
                "id": "seqCondition_0-output-undetermined-Condition",
                "name": "undetermined",
                "label": "undetermined",
                "type": "Condition",
                "isAnchor": true
              }
            ]
          }
        ],
        "outputs": {
          "output": "next"
        },
        "selected": false
      },
      "width": 300,
      "height": 576,
      "positionAbsolute": {
        "x": 635.7619064644309,
        "y": -96.93664768894513
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "seqAgent_3",
      "position": {
        "x": 2816.1047438905557,
        "y": -949.4192386132737
      },
      "type": "customNode",
      "data": {
        "id": "seqAgent_3",
        "label": "Agent",
        "version": 3.1,
        "name": "seqAgent",
        "type": "Agent",
        "baseClasses": [
          "Agent"
        ],
        "category": "Sequential Agents",
        "description": "Agent that can execute tools",
        "inputParams": [
          {
            "label": "Agent Name",
            "name": "agentName",
            "type": "string",
            "placeholder": "Agent",
            "id": "seqAgent_3-input-agentName-string"
          },
          {
            "label": "System Prompt",
            "name": "systemMessagePrompt",
            "type": "string",
            "rows": 4,
            "optional": true,
            "default": "You are a research assistant who can search for up-to-date info using search engine.",
            "id": "seqAgent_3-input-systemMessagePrompt-string"
          },
          {
            "label": "Human Prompt",
            "name": "humanMessagePrompt",
            "type": "string",
            "description": "This prompt will be added at the end of the messages as human message",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_3-input-humanMessagePrompt-string"
          },
          {
            "label": "Messages History",
            "name": "messageHistory",
            "description": "Return a list of messages between System Prompt and Human Prompt. This is useful when you want to provide few shot examples",
            "type": "code",
            "hideCodeExecute": true,
            "codeExample": "const { AIMessage, HumanMessage, ToolMessage } = require('@langchain/core/messages');\n\nreturn [\n    new HumanMessage(\"What is 333382 ðŸ¦œ 1932?\"),\n    new AIMessage({\n        content: \"\",\n        tool_calls: [\n        {\n            id: \"12345\",\n            name: \"calulator\",\n            args: {\n                number1: 333382,\n                number2: 1932,\n                operation: \"divide\",\n            },\n        },\n        ],\n    }),\n    new ToolMessage({\n        tool_call_id: \"12345\",\n        content: \"The answer is 172.558.\",\n    }),\n    new AIMessage(\"The answer is 172.558.\"),\n]",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_3-input-messageHistory-code"
          },
          {
            "label": "Require Approval",
            "name": "interrupt",
            "description": "Require approval before executing tools. Will proceed when tools are not called",
            "type": "boolean",
            "optional": true,
            "id": "seqAgent_3-input-interrupt-boolean"
          },
          {
            "label": "Format Prompt Values",
            "name": "promptValues",
            "description": "Assign values to the prompt variables. You can also use $this.state.<variable-name> to get the state value",
            "type": "json",
            "optional": true,
            "acceptVariable": true,
            "list": true,
            "id": "seqAgent_3-input-promptValues-json"
          },
          {
            "label": "Approval Prompt",
            "name": "approvalPrompt",
            "description": "Prompt for approval. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "You are about to execute tool: {tools}. Ask if user want to proceed",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_3-input-approvalPrompt-string"
          },
          {
            "label": "Approve Button Text",
            "name": "approveButtonText",
            "description": "Text for approve button. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "Yes",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_3-input-approveButtonText-string"
          },
          {
            "label": "Reject Button Text",
            "name": "rejectButtonText",
            "description": "Text for reject button. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "No",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_3-input-rejectButtonText-string"
          },
          {
            "label": "Update State",
            "name": "updateStateMemory",
            "type": "tabs",
            "tabIdentifier": "selectedUpdateStateMemoryTab",
            "additionalParams": true,
            "default": "updateStateMemoryUI",
            "tabs": [
              {
                "label": "Update State (Table)",
                "name": "updateStateMemoryUI",
                "type": "datagrid",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Key and value pair to be updated. For example: if you have the following State:\n    | Key       | Operation     | Default Value     |\n    |-----------|---------------|-------------------|\n    | user      | Replace       |                   |\n\n    You can update the \"user\" value with the following:\n    | Key       | Value     |\n    |-----------|-----------|\n    | user      | john doe  |\n\n2. If you want to use the Agent's output as the value to update state, it is available as available as `$this.output` with the following structure:\n    ```json\n    {\n        \"content\": \"Hello! How can I assist you today?\",\n        \"usedTools\": [\n            {\n                \"tool\": \"tool-name\",\n                \"toolInput\": \"{foo: var}\",\n                \"toolOutput\": \"This is the tool's output\"\n            }\n        ],\n        \"sourceDocuments\": [\n            {\n                \"pageContent\": \"This is the page content\",\n                \"metadata\": \"{foo: var}\"\n            }\n        ]\n    }\n    ```\n\n    For example, if the `toolOutput` is the value you want to update the state with, you can do the following:\n    | Key       | Value                                     |\n    |-----------|-------------------------------------------|\n    | user      | `$this.output.usedTools[0].toolOutput`  |\n\n3. You can get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "description": "This is only applicable when you have a custom State at the START node. After agent execution, you might want to update the State values",
                "datagrid": [
                  {
                    "field": "key",
                    "headerName": "Key",
                    "type": "asyncSingleSelect",
                    "loadMethod": "loadStateKeys",
                    "flex": 0.5,
                    "editable": true
                  },
                  {
                    "field": "value",
                    "headerName": "Value",
                    "type": "freeSolo",
                    "valueOptions": [
                      {
                        "label": "Agent Output (string)",
                        "value": "$this.output.content"
                      },
                      {
                        "label": "Used Tools (array)",
                        "value": "$this.output.usedTools"
                      },
                      {
                        "label": "First Tool Output (string)",
                        "value": "$this.output.usedTools[0].toolOutput"
                      },
                      {
                        "label": "Source Documents (array)",
                        "value": "$this.output.sourceDocuments"
                      },
                      {
                        "label": "Global variable (string)",
                        "value": "$vars.<variable-name>"
                      },
                      {
                        "label": "Input Question (string)",
                        "value": "$this.input"
                      },
                      {
                        "label": "Session Id (string)",
                        "value": "$this.sessionId"
                      },
                      {
                        "label": "Chat Id (string)",
                        "value": "$this.chatId"
                      },
                      {
                        "label": "Workflow Id (string)",
                        "value": "$this.workflowId"
                      }
                    ],
                    "editable": true,
                    "flex": 1
                  }
                ],
                "optional": true,
                "additionalParams": true
              },
              {
                "label": "Update State (Code)",
                "name": "updateStateMemoryCode",
                "type": "code",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Return the key value JSON object. For example: if you have the following State:\n    ```json\n    {\n        \"user\": null\n    }\n    ```\n\n    You can update the \"user\" value by returning the following:\n    ```js\n    return {\n        \"user\": \"john doe\"\n    }\n    ```\n\n2. If you want to use the agent's output as the value to update state, it is available as `$this.output` with the following structure:\n    ```json\n    {\n        \"content\": \"Hello! How can I assist you today?\",\n        \"usedTools\": [\n            {\n                \"tool\": \"tool-name\",\n                \"toolInput\": \"{foo: var}\",\n                \"toolOutput\": \"This is the tool's output\"\n            }\n        ],\n        \"sourceDocuments\": [\n            {\n                \"pageContent\": \"This is the page content\",\n                \"metadata\": \"{foo: var}\"\n            }\n        ]\n    }\n    ```\n\n    For example, if the `toolOutput` is the value you want to update the state with, you can return the following:\n    ```js\n    return {\n        \"user\": $this.output.usedTools[0].toolOutput\n    }\n    ```\n\n3. You can also get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "description": "This is only applicable when you have a custom State at the START node. After agent execution, you might want to update the State values. Must return an object representing the state",
                "hideCodeExecute": true,
                "codeExample": "const result = $this.output;\n\n/* Suppose we have a custom State schema like this:\n* {\n    aggregate: {\n        value: (x, y) => x.concat(y),\n        default: () => []\n    }\n  }\n*/\n\nreturn {\n  aggregate: [result.content]\n};",
                "optional": true,
                "additionalParams": true
              }
            ],
            "id": "seqAgent_3-input-updateStateMemory-tabs"
          },
          {
            "label": "Max Iterations",
            "name": "maxIterations",
            "type": "number",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_3-input-maxIterations-number"
          }
        ],
        "inputAnchors": [
          {
            "label": "Tools",
            "name": "tools",
            "type": "Tool",
            "list": true,
            "optional": true,
            "id": "seqAgent_3-input-tools-Tool"
          },
          {
            "label": "Start | Agent | Condition | LLM | Tool Node",
            "name": "sequentialNode",
            "type": "Start | Agent | Condition | LLMNode | ToolNode",
            "list": true,
            "id": "seqAgent_3-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode"
          },
          {
            "label": "Chat Model",
            "name": "model",
            "type": "BaseChatModel",
            "optional": true,
            "description": "Overwrite model to be used for this agent",
            "id": "seqAgent_3-input-model-BaseChatModel"
          }
        ],
        "inputs": {
          "agentName": "Prospects",
          "systemMessagePrompt": "<general_rules>\n{system_base}\n</general_rules>\n\n<agent_goal>\nYou are a friendly, helpful representative for {brand_name}. Your job is to capture the lead's information and schedule a callback with our Business Class sales agent.\n\nPRIMARY GOAL: Get their name, confirm this is for a business, then schedule an appointment.\n</agent_goal>\n\n<voice_and_tone>\n{brand_voice_description}\n</voice_and_tone>\n\n<additional_rules>\n{additional_prospects_rules}\n</additional_rules>\n\n<lead_capture>\nCollect the following naturally through conversation:\n- First and last name\n- Confirm this is for a business (not residential)\n\nThe Business Class Sales Agent will handle address verification.\n</lead_capture>\n\n<scheduling>\nWhen they're ready to schedule:\n- Ask for their preferred date and time\n- Ask for their timezone\n- Appointments must be next business day or later (not same day)\n- Business hours: {business_hours} {business_timezone}\n\nAfter scheduling confirm:\n\"Great, you're all set for [date] at [time]. You'll get a text with the phone number to call about 5 minutes before your appointment.\"\n\nIMPORTANT: The lead will call US. We send them the number to call. We do not call them.\n</scheduling>\n\n<question_handling>\nWhen they ask detailed questions about:\n- Pricing, plans, or packages\n- What's included in services\n- Gift cards or promotions\n- Add-ons or features\n- What happens next after a quote\n- Virtual Business Card\n\nRESPONSE: \"Our Business Class agent can help provide more information on that. Can I schedule a call so we can help with your request?\"\n\nKeep redirecting to scheduling - that's where they'll get their answers.\n</question_handling>\n\n<objection_handling>\n\"I need to think about it\":\n- \"No pressure at all. Want me to schedule a call anyway so you can get all the details? No commitment.\"\n\n\"Just send me information\":\n- \"I can point you to our website, but honestly a quick call is the best way to get accurate pricing for your location. Want me to set one up?\"\n\n\"Not ready yet\":\n- \"Totally understand. When you're ready, just text back and we can get you scheduled.\"\n</objection_handling>\n\n<tool_usage_strategy>\nDate and Time Resolution:\n- If the user uses relative dates (e.g., \"tomorrow\", \"next Monday\"), call `currentDateTime` to get the current date first.\n- Calculate the specific date based on the user's input before proceeding.\n\nAppointment Booking Flow:\n1. User indicates intent to book/schedule\n2. Use `currentDateTime` if date is relative\n3. Call `businessHoursChecker` with the requested date/time\n   - If outside business hours: explain and ask for a time during {business_hours} {business_timezone}\n4. If valid, call `scheduleCta`\n   - Confirm: \"You'll receive a text with the phone number to call about 5 minutes before your scheduled time.\"\n\nConsumer Profile Management:\n- When the user provides their name, call `postConsumerProfile` to save it\n- Only do this once per session unless data changes\n</tool_usage_strategy>\n\n<faqs>\n{qa_pairs}\n</faqs>\n\n",
          "humanMessagePrompt": "",
          "messageHistory": "",
          "tools": [
            "{{googleCustomSearch_0.data.instance}}",
            "{{currentDateTime_0.data.instance}}",
            "{{postConsumerProfile_0.data.instance}}",
            "{{businessHoursChecker_0.data.instance}}"
          ],
          "sequentialNode": [
            "{{seqCondition_0.data.instance}}"
          ],
          "model": "",
          "interrupt": "",
          "promptValues": "{\"brand_name\":\"$this.state.brand_name\",\"system_base\":\"$this.state.brand_system_base\",\"business_hours\":\"$this.state.brand_business_hours\",\"business_timezone\":\"$this.state.brand_business_timezone\",\"brand_voice_description\":\"$this.state.brand_voice_description\",\"additional_general_rules\":\"$this.state. additional_general_rules\",\"additional_prospects_rules\":\"$this.state.additional_prospects_rules\",\"consumer_phone_number\":\"$this.consumer_phone_number\",\"conversation_id\":\"$this.conversation_id\",\"tenant_gid\":\"$this.tenant_gid\",\"qa_pairs\":\"$this.state.qa_pairs\",\"agent_phone_number\":\"$this.agent_phone_number\"}",
          "approvalPrompt": "You are about to execute tool: {tools}. Ask if user want to proceed",
          "approveButtonText": "Yes",
          "rejectButtonText": "No",
          "updateStateMemory": "updateStateMemoryUI",
          "maxIterations": ""
        },
        "outputAnchors": [
          {
            "id": "seqAgent_3-output-seqAgent-Agent",
            "name": "seqAgent",
            "label": "Agent",
            "description": "Agent that can execute tools",
            "type": "Agent"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 882,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": 2816.1047438905557,
        "y": -949.4192386132737
      }
    },
    {
      "id": "seqAgent_4",
      "position": {
        "x": 2252.7724598828413,
        "y": 171.54565229212295
      },
      "type": "customNode",
      "data": {
        "id": "seqAgent_4",
        "label": "Agent",
        "version": 3.1,
        "name": "seqAgent",
        "type": "Agent",
        "baseClasses": [
          "Agent"
        ],
        "category": "Sequential Agents",
        "description": "Agent that can execute tools",
        "inputParams": [
          {
            "label": "Agent Name",
            "name": "agentName",
            "type": "string",
            "placeholder": "Agent",
            "id": "seqAgent_4-input-agentName-string"
          },
          {
            "label": "System Prompt",
            "name": "systemMessagePrompt",
            "type": "string",
            "rows": 4,
            "optional": true,
            "default": "You are a research assistant who can search for up-to-date info using search engine.",
            "id": "seqAgent_4-input-systemMessagePrompt-string"
          },
          {
            "label": "Human Prompt",
            "name": "humanMessagePrompt",
            "type": "string",
            "description": "This prompt will be added at the end of the messages as human message",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_4-input-humanMessagePrompt-string"
          },
          {
            "label": "Messages History",
            "name": "messageHistory",
            "description": "Return a list of messages between System Prompt and Human Prompt. This is useful when you want to provide few shot examples",
            "type": "code",
            "hideCodeExecute": true,
            "codeExample": "const { AIMessage, HumanMessage, ToolMessage } = require('@langchain/core/messages');\n\nreturn [\n    new HumanMessage(\"What is 333382 ðŸ¦œ 1932?\"),\n    new AIMessage({\n        content: \"\",\n        tool_calls: [\n        {\n            id: \"12345\",\n            name: \"calulator\",\n            args: {\n                number1: 333382,\n                number2: 1932,\n                operation: \"divide\",\n            },\n        },\n        ],\n    }),\n    new ToolMessage({\n        tool_call_id: \"12345\",\n        content: \"The answer is 172.558.\",\n    }),\n    new AIMessage(\"The answer is 172.558.\"),\n]",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_4-input-messageHistory-code"
          },
          {
            "label": "Require Approval",
            "name": "interrupt",
            "description": "Require approval before executing tools. Will proceed when tools are not called",
            "type": "boolean",
            "optional": true,
            "id": "seqAgent_4-input-interrupt-boolean"
          },
          {
            "label": "Format Prompt Values",
            "name": "promptValues",
            "description": "Assign values to the prompt variables. You can also use $this.state.<variable-name> to get the state value",
            "type": "json",
            "optional": true,
            "acceptVariable": true,
            "list": true,
            "id": "seqAgent_4-input-promptValues-json"
          },
          {
            "label": "Approval Prompt",
            "name": "approvalPrompt",
            "description": "Prompt for approval. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "You are about to execute tool: {tools}. Ask if user want to proceed",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_4-input-approvalPrompt-string"
          },
          {
            "label": "Approve Button Text",
            "name": "approveButtonText",
            "description": "Text for approve button. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "Yes",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_4-input-approveButtonText-string"
          },
          {
            "label": "Reject Button Text",
            "name": "rejectButtonText",
            "description": "Text for reject button. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "No",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_4-input-rejectButtonText-string"
          },
          {
            "label": "Update State",
            "name": "updateStateMemory",
            "type": "tabs",
            "tabIdentifier": "selectedUpdateStateMemoryTab",
            "additionalParams": true,
            "default": "updateStateMemoryUI",
            "tabs": [
              {
                "label": "Update State (Table)",
                "name": "updateStateMemoryUI",
                "type": "datagrid",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Key and value pair to be updated. For example: if you have the following State:\n    | Key       | Operation     | Default Value     |\n    |-----------|---------------|-------------------|\n    | user      | Replace       |                   |\n\n    You can update the \"user\" value with the following:\n    | Key       | Value     |\n    |-----------|-----------|\n    | user      | john doe  |\n\n2. If you want to use the Agent's output as the value to update state, it is available as available as `$this.output` with the following structure:\n    ```json\n    {\n        \"content\": \"Hello! How can I assist you today?\",\n        \"usedTools\": [\n            {\n                \"tool\": \"tool-name\",\n                \"toolInput\": \"{foo: var}\",\n                \"toolOutput\": \"This is the tool's output\"\n            }\n        ],\n        \"sourceDocuments\": [\n            {\n                \"pageContent\": \"This is the page content\",\n                \"metadata\": \"{foo: var}\"\n            }\n        ]\n    }\n    ```\n\n    For example, if the `toolOutput` is the value you want to update the state with, you can do the following:\n    | Key       | Value                                     |\n    |-----------|-------------------------------------------|\n    | user      | `$this.output.usedTools[0].toolOutput`  |\n\n3. You can get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "description": "This is only applicable when you have a custom State at the START node. After agent execution, you might want to update the State values",
                "datagrid": [
                  {
                    "field": "key",
                    "headerName": "Key",
                    "type": "asyncSingleSelect",
                    "loadMethod": "loadStateKeys",
                    "flex": 0.5,
                    "editable": true
                  },
                  {
                    "field": "value",
                    "headerName": "Value",
                    "type": "freeSolo",
                    "valueOptions": [
                      {
                        "label": "Agent Output (string)",
                        "value": "$this.output.content"
                      },
                      {
                        "label": "Used Tools (array)",
                        "value": "$this.output.usedTools"
                      },
                      {
                        "label": "First Tool Output (string)",
                        "value": "$this.output.usedTools[0].toolOutput"
                      },
                      {
                        "label": "Source Documents (array)",
                        "value": "$this.output.sourceDocuments"
                      },
                      {
                        "label": "Global variable (string)",
                        "value": "$vars.<variable-name>"
                      },
                      {
                        "label": "Input Question (string)",
                        "value": "$this.input"
                      },
                      {
                        "label": "Session Id (string)",
                        "value": "$this.sessionId"
                      },
                      {
                        "label": "Chat Id (string)",
                        "value": "$this.chatId"
                      },
                      {
                        "label": "Workflow Id (string)",
                        "value": "$this.workflowId"
                      }
                    ],
                    "editable": true,
                    "flex": 1
                  }
                ],
                "optional": true,
                "additionalParams": true
              },
              {
                "label": "Update State (Code)",
                "name": "updateStateMemoryCode",
                "type": "code",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Return the key value JSON object. For example: if you have the following State:\n    ```json\n    {\n        \"user\": null\n    }\n    ```\n\n    You can update the \"user\" value by returning the following:\n    ```js\n    return {\n        \"user\": \"john doe\"\n    }\n    ```\n\n2. If you want to use the agent's output as the value to update state, it is available as `$this.output` with the following structure:\n    ```json\n    {\n        \"content\": \"Hello! How can I assist you today?\",\n        \"usedTools\": [\n            {\n                \"tool\": \"tool-name\",\n                \"toolInput\": \"{foo: var}\",\n                \"toolOutput\": \"This is the tool's output\"\n            }\n        ],\n        \"sourceDocuments\": [\n            {\n                \"pageContent\": \"This is the page content\",\n                \"metadata\": \"{foo: var}\"\n            }\n        ]\n    }\n    ```\n\n    For example, if the `toolOutput` is the value you want to update the state with, you can return the following:\n    ```js\n    return {\n        \"user\": $this.output.usedTools[0].toolOutput\n    }\n    ```\n\n3. You can also get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "description": "This is only applicable when you have a custom State at the START node. After agent execution, you might want to update the State values. Must return an object representing the state",
                "hideCodeExecute": true,
                "codeExample": "const result = $this.output;\n\n/* Suppose we have a custom State schema like this:\n* {\n    aggregate: {\n        value: (x, y) => x.concat(y),\n        default: () => []\n    }\n  }\n*/\n\nreturn {\n  aggregate: [result.content]\n};",
                "optional": true,
                "additionalParams": true
              }
            ],
            "id": "seqAgent_4-input-updateStateMemory-tabs"
          },
          {
            "label": "Max Iterations",
            "name": "maxIterations",
            "type": "number",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_4-input-maxIterations-number"
          }
        ],
        "inputAnchors": [
          {
            "label": "Tools",
            "name": "tools",
            "type": "Tool",
            "list": true,
            "optional": true,
            "id": "seqAgent_4-input-tools-Tool"
          },
          {
            "label": "Start | Agent | Condition | LLM | Tool Node",
            "name": "sequentialNode",
            "type": "Start | Agent | Condition | LLMNode | ToolNode",
            "list": true,
            "id": "seqAgent_4-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode"
          },
          {
            "label": "Chat Model",
            "name": "model",
            "type": "BaseChatModel",
            "optional": true,
            "description": "Overwrite model to be used for this agent",
            "id": "seqAgent_4-input-model-BaseChatModel"
          }
        ],
        "inputs": {
          "agentName": "Existing Customers",
          "systemMessagePrompt": "<general_rules>\n{system_base}\n</general_rules>\n\n<agent_goal>\nYou help existing {brand_name} customers get to the right place. Route sales-related requests to a callback, and support-related issues to the support portal.\n</agent_goal>\n\n<voice_and_tone>\n{brand_voice_description}\n- Extra empathy for customers with issues - acknowledge before redirecting\n</voice_and_tone>\n\n<additional_rules>\n{additional_customers_rules}\n</additional_rules>\n\n<routing_logic>\nSCHEDULE A CALLBACK FOR:\n- Renewals (\"renewing my contract\")\n- Address changes / moving locations\n- Adding new locations\n- Upgrading service\n- Adding new services\n\nDIRECT TO SUPPORT FOR:\n- Technical problems (connection issues, slow internet, service down)\n- Billing questions\n- Account access\n- Equipment issues\n- Outages\n\nSupport link: {brand_support_link}\n</routing_logic>\n\n<support_response>\n\"For [technical/billing] help, our support team can access your account. Head to {brand_support_link} or call our 24/7 line and they'll help you out.\"\n</support_response>\n\n<callback_scheduling>\nFor renewals, moves, or new services:\n- \"Let me get you scheduled with our team. What day and time works for you?\"\n- Ask for timezone\n- Confirm: \"You'll get a text with the number to call about 5 minutes before your appointment.\"\n- Business hours: {business_hours} {business_timezone}\n- The customer will CALL US. We do not call them.\n</callback_scheduling>\n\n<empathy_patterns>\n- Technical issues: \"That's definitely not the experience we want you having. Let me get you sorted.\"\n- Billing confusion: \"Bills can be confusing - totally get it.\"\n- Been transferred around: \"Sorry you've had to jump through hoops. Let me help.\"\n- General frustration: \"I hear you. Let's figure this out.\"\n</empathy_patterns>\n\n<faqs>\n{qa_pairs}\n</faqs>\n",
          "humanMessagePrompt": "",
          "messageHistory": "",
          "tools": [
            "{{googleCustomSearch_0.data.instance}}",
            "{{currentDateTime_0.data.instance}}"
          ],
          "sequentialNode": [
            "{{seqCondition_0.data.instance}}"
          ],
          "model": "",
          "interrupt": "",
          "promptValues": "{\"brand_name\":\"$this.state.brand_name\",\"system_base\":\"$this.state.brand_system_base\",\"business_hours\":\"$this.state.brand_business_hours\",\"business_timezone\":\"$this.state.brand_business_timezone\",\"brand_voice_description\":\"$this.state.brand_voice_description\",\"additional_general_rules\":\"$this.state. additional_general_rules\",\"additional_customers_rules\":\"$this.state.additional_customers_rules\",\"brand_support_link\":\"$this.state.brand_support_link\",\"qa_pairs\":\"$this.state.qa_pairs\"}",
          "approvalPrompt": "You are about to execute tool: {tools}. Ask if user want to proceed",
          "approveButtonText": "Yes",
          "rejectButtonText": "No",
          "updateStateMemory": "updateStateMemoryUI",
          "maxIterations": ""
        },
        "outputAnchors": [
          {
            "id": "seqAgent_4-output-seqAgent-Agent",
            "name": "seqAgent",
            "label": "Agent",
            "description": "Agent that can execute tools",
            "type": "Agent"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 882,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": 2252.7724598828413,
        "y": 171.54565229212295
      }
    },
    {
      "id": "ChatBaseten_0",
      "position": {
        "x": -256.4753770417764,
        "y": -721.6450861390215
      },
      "type": "customNode",
      "data": {
        "id": "ChatBaseten_0",
        "label": "ChatBaseten",
        "version": 1,
        "name": "ChatBaseten",
        "type": "ChatBaseten",
        "baseClasses": [
          "ChatBaseten",
          "BaseChatModel",
          "BaseLanguageModel",
          "Runnable"
        ],
        "category": "Chat Models",
        "description": "Wrapper around Baseten large language models that use the Chat endpoint",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "credentialNames": [
              "basetenApi"
            ],
            "id": "ChatBaseten_0-input-credential-credential"
          },
          {
            "label": "Model Name",
            "name": "modelName",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "default": "gpt-oss-120b",
            "id": "ChatBaseten_0-input-modelName-asyncOptions"
          },
          {
            "label": "Temperature",
            "name": "temperature",
            "type": "number",
            "step": 0.1,
            "default": 0.9,
            "optional": true,
            "id": "ChatBaseten_0-input-temperature-number"
          },
          {
            "label": "Max Tokens",
            "name": "maxTokens",
            "type": "number",
            "step": 1,
            "optional": true,
            "additionalParams": true,
            "id": "ChatBaseten_0-input-maxTokens-number"
          },
          {
            "label": "Top Probability",
            "name": "topP",
            "type": "number",
            "step": 0.1,
            "optional": true,
            "additionalParams": true,
            "id": "ChatBaseten_0-input-topP-number"
          },
          {
            "label": "Timeout",
            "name": "timeout",
            "type": "number",
            "step": 1,
            "optional": true,
            "additionalParams": true,
            "id": "ChatBaseten_0-input-timeout-number"
          },
          {
            "label": "Proxy Url",
            "name": "proxyUrl",
            "type": "string",
            "optional": true,
            "additionalParams": true,
            "id": "ChatBaseten_0-input-proxyUrl-string"
          },
          {
            "label": "Stop Sequence",
            "name": "stopSequence",
            "type": "string",
            "rows": 4,
            "optional": true,
            "description": "List of stop words to use when generating. Use comma to separate multiple stop words.",
            "additionalParams": true,
            "id": "ChatBaseten_0-input-stopSequence-string"
          },
          {
            "label": "BaseOptions",
            "name": "baseOptions",
            "type": "json",
            "optional": true,
            "additionalParams": true,
            "id": "ChatBaseten_0-input-baseOptions-json"
          }
        ],
        "inputAnchors": [
          {
            "label": "Cache",
            "name": "cache",
            "type": "BaseCache",
            "optional": true,
            "id": "ChatBaseten_0-input-cache-BaseCache"
          }
        ],
        "inputs": {
          "cache": "",
          "modelName": "openai/gpt-oss-120b",
          "temperature": "1",
          "maxTokens": "",
          "topP": "0.95",
          "timeout": "",
          "proxyUrl": "",
          "stopSequence": "",
          "baseOptions": ""
        },
        "outputAnchors": [
          {
            "id": "ChatBaseten_0-output-ChatBaseten-ChatBaseten|BaseChatModel|BaseLanguageModel|Runnable",
            "name": "ChatBaseten",
            "label": "ChatBaseten",
            "description": "Wrapper around Baseten large language models that use the Chat endpoint",
            "type": "ChatBaseten | BaseChatModel | BaseLanguageModel | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 577,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": -256.4753770417764,
        "y": -721.6450861390215
      }
    },
    {
      "id": "seqEnd_3",
      "position": {
        "x": 3270.438934366146,
        "y": -216.54099451778913
      },
      "type": "customNode",
      "data": {
        "id": "seqEnd_3",
        "label": "End",
        "version": 1,
        "name": "seqEnd",
        "type": "End",
        "baseClasses": [
          "End"
        ],
        "category": "Sequential Agents",
        "description": "End conversation",
        "inputParams": [],
        "inputAnchors": [
          {
            "label": "Agent | Condition | LLM | Tool Node",
            "name": "sequentialNode",
            "type": "Agent | Condition | LLMNode | ToolNode",
            "id": "seqEnd_3-input-sequentialNode-Agent | Condition | LLMNode | ToolNode"
          }
        ],
        "inputs": {
          "sequentialNode": "{{seqAgent_3.data.instance}}"
        },
        "outputAnchors": [],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 145,
      "positionAbsolute": {
        "x": 3270.438934366146,
        "y": -216.54099451778913
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "seqAgent_5",
      "position": {
        "x": 1741.403538087748,
        "y": 1238.7602702143006
      },
      "type": "customNode",
      "data": {
        "id": "seqAgent_5",
        "label": "Agent",
        "version": 3.1,
        "name": "seqAgent",
        "type": "Agent",
        "baseClasses": [
          "Agent"
        ],
        "category": "Sequential Agents",
        "description": "Agent that can execute tools",
        "inputParams": [
          {
            "label": "Agent Name",
            "name": "agentName",
            "type": "string",
            "placeholder": "Agent",
            "id": "seqAgent_5-input-agentName-string"
          },
          {
            "label": "System Prompt",
            "name": "systemMessagePrompt",
            "type": "string",
            "rows": 4,
            "optional": true,
            "default": "You are a research assistant who can search for up-to-date info using search engine.",
            "id": "seqAgent_5-input-systemMessagePrompt-string"
          },
          {
            "label": "Human Prompt",
            "name": "humanMessagePrompt",
            "type": "string",
            "description": "This prompt will be added at the end of the messages as human message",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_5-input-humanMessagePrompt-string"
          },
          {
            "label": "Messages History",
            "name": "messageHistory",
            "description": "Return a list of messages between System Prompt and Human Prompt. This is useful when you want to provide few shot examples",
            "type": "code",
            "hideCodeExecute": true,
            "codeExample": "const { AIMessage, HumanMessage, ToolMessage } = require('@langchain/core/messages');\n\nreturn [\n    new HumanMessage(\"What is 333382 ðŸ¦œ 1932?\"),\n    new AIMessage({\n        content: \"\",\n        tool_calls: [\n        {\n            id: \"12345\",\n            name: \"calulator\",\n            args: {\n                number1: 333382,\n                number2: 1932,\n                operation: \"divide\",\n            },\n        },\n        ],\n    }),\n    new ToolMessage({\n        tool_call_id: \"12345\",\n        content: \"The answer is 172.558.\",\n    }),\n    new AIMessage(\"The answer is 172.558.\"),\n]",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_5-input-messageHistory-code"
          },
          {
            "label": "Require Approval",
            "name": "interrupt",
            "description": "Require approval before executing tools. Will proceed when tools are not called",
            "type": "boolean",
            "optional": true,
            "id": "seqAgent_5-input-interrupt-boolean"
          },
          {
            "label": "Format Prompt Values",
            "name": "promptValues",
            "description": "Assign values to the prompt variables. You can also use $this.state.<variable-name> to get the state value",
            "type": "json",
            "optional": true,
            "acceptVariable": true,
            "list": true,
            "id": "seqAgent_5-input-promptValues-json"
          },
          {
            "label": "Approval Prompt",
            "name": "approvalPrompt",
            "description": "Prompt for approval. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "You are about to execute tool: {tools}. Ask if user want to proceed",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_5-input-approvalPrompt-string"
          },
          {
            "label": "Approve Button Text",
            "name": "approveButtonText",
            "description": "Text for approve button. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "Yes",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_5-input-approveButtonText-string"
          },
          {
            "label": "Reject Button Text",
            "name": "rejectButtonText",
            "description": "Text for reject button. Only applicable if \"Require Approval\" is enabled",
            "type": "string",
            "default": "No",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_5-input-rejectButtonText-string"
          },
          {
            "label": "Update State",
            "name": "updateStateMemory",
            "type": "tabs",
            "tabIdentifier": "selectedUpdateStateMemoryTab",
            "additionalParams": true,
            "default": "updateStateMemoryUI",
            "tabs": [
              {
                "label": "Update State (Table)",
                "name": "updateStateMemoryUI",
                "type": "datagrid",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Key and value pair to be updated. For example: if you have the following State:\n    | Key       | Operation     | Default Value     |\n    |-----------|---------------|-------------------|\n    | user      | Replace       |                   |\n\n    You can update the \"user\" value with the following:\n    | Key       | Value     |\n    |-----------|-----------|\n    | user      | john doe  |\n\n2. If you want to use the Agent's output as the value to update state, it is available as available as `$this.output` with the following structure:\n    ```json\n    {\n        \"content\": \"Hello! How can I assist you today?\",\n        \"usedTools\": [\n            {\n                \"tool\": \"tool-name\",\n                \"toolInput\": \"{foo: var}\",\n                \"toolOutput\": \"This is the tool's output\"\n            }\n        ],\n        \"sourceDocuments\": [\n            {\n                \"pageContent\": \"This is the page content\",\n                \"metadata\": \"{foo: var}\"\n            }\n        ]\n    }\n    ```\n\n    For example, if the `toolOutput` is the value you want to update the state with, you can do the following:\n    | Key       | Value                                     |\n    |-----------|-------------------------------------------|\n    | user      | `$this.output.usedTools[0].toolOutput`  |\n\n3. You can get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "description": "This is only applicable when you have a custom State at the START node. After agent execution, you might want to update the State values",
                "datagrid": [
                  {
                    "field": "key",
                    "headerName": "Key",
                    "type": "asyncSingleSelect",
                    "loadMethod": "loadStateKeys",
                    "flex": 0.5,
                    "editable": true
                  },
                  {
                    "field": "value",
                    "headerName": "Value",
                    "type": "freeSolo",
                    "valueOptions": [
                      {
                        "label": "Agent Output (string)",
                        "value": "$this.output.content"
                      },
                      {
                        "label": "Used Tools (array)",
                        "value": "$this.output.usedTools"
                      },
                      {
                        "label": "First Tool Output (string)",
                        "value": "$this.output.usedTools[0].toolOutput"
                      },
                      {
                        "label": "Source Documents (array)",
                        "value": "$this.output.sourceDocuments"
                      },
                      {
                        "label": "Global variable (string)",
                        "value": "$vars.<variable-name>"
                      },
                      {
                        "label": "Input Question (string)",
                        "value": "$this.input"
                      },
                      {
                        "label": "Session Id (string)",
                        "value": "$this.sessionId"
                      },
                      {
                        "label": "Chat Id (string)",
                        "value": "$this.chatId"
                      },
                      {
                        "label": "Workflow Id (string)",
                        "value": "$this.workflowId"
                      }
                    ],
                    "editable": true,
                    "flex": 1
                  }
                ],
                "optional": true,
                "additionalParams": true
              },
              {
                "label": "Update State (Code)",
                "name": "updateStateMemoryCode",
                "type": "code",
                "hint": {
                  "label": "How to use",
                  "value": "\n1. Return the key value JSON object. For example: if you have the following State:\n    ```json\n    {\n        \"user\": null\n    }\n    ```\n\n    You can update the \"user\" value by returning the following:\n    ```js\n    return {\n        \"user\": \"john doe\"\n    }\n    ```\n\n2. If you want to use the agent's output as the value to update state, it is available as `$this.output` with the following structure:\n    ```json\n    {\n        \"content\": \"Hello! How can I assist you today?\",\n        \"usedTools\": [\n            {\n                \"tool\": \"tool-name\",\n                \"toolInput\": \"{foo: var}\",\n                \"toolOutput\": \"This is the tool's output\"\n            }\n        ],\n        \"sourceDocuments\": [\n            {\n                \"pageContent\": \"This is the page content\",\n                \"metadata\": \"{foo: var}\"\n            }\n        ]\n    }\n    ```\n\n    For example, if the `toolOutput` is the value you want to update the state with, you can return the following:\n    ```js\n    return {\n        \"user\": $this.output.usedTools[0].toolOutput\n    }\n    ```\n\n3. You can also get default flow config, including the current \"state\":\n    - `$this.sessionId`\n    - `$this.chatId`\n    - `$this.workflowId`\n    - `$this.input`\n    - `$this.state`\n\n4. You can get custom variables: `$vars.<variable-name>`\n\n"
                },
                "description": "This is only applicable when you have a custom State at the START node. After agent execution, you might want to update the State values. Must return an object representing the state",
                "hideCodeExecute": true,
                "codeExample": "const result = $this.output;\n\n/* Suppose we have a custom State schema like this:\n* {\n    aggregate: {\n        value: (x, y) => x.concat(y),\n        default: () => []\n    }\n  }\n*/\n\nreturn {\n  aggregate: [result.content]\n};",
                "optional": true,
                "additionalParams": true
              }
            ],
            "id": "seqAgent_5-input-updateStateMemory-tabs"
          },
          {
            "label": "Max Iterations",
            "name": "maxIterations",
            "type": "number",
            "optional": true,
            "additionalParams": true,
            "id": "seqAgent_5-input-maxIterations-number"
          }
        ],
        "inputAnchors": [
          {
            "label": "Tools",
            "name": "tools",
            "type": "Tool",
            "list": true,
            "optional": true,
            "id": "seqAgent_5-input-tools-Tool"
          },
          {
            "label": "Start | Agent | Condition | LLM | Tool Node",
            "name": "sequentialNode",
            "type": "Start | Agent | Condition | LLMNode | ToolNode",
            "list": true,
            "id": "seqAgent_5-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode"
          },
          {
            "label": "Chat Model",
            "name": "model",
            "type": "BaseChatModel",
            "optional": true,
            "description": "Overwrite model to be used for this agent",
            "id": "seqAgent_5-input-model-BaseChatModel"
          }
        ],
        "inputs": {
          "agentName": "Undetermined",
          "systemMessagePrompt": "<general_rules>\n{system_base}\n</general_rules>\n\n<agent_goal>\nYou're the friendly first point of contact for {brand_name}. Your only job right now is to figure out what kind of help this person needs so you can route them to the right place. Keep it simple and quick.\n</agent_goal>\n\n<voice_and_tone>\n{brand_voice_description}\n- Keep responses SHORT - one question at a time\n- Friendly but efficient - respect their time\n</voice_and_tone>\n\n<opening>\nStart with something warm but direct:\n\"Hey! Thanks for reaching out to Comcast Business. Are you looking to set up new service, or do you already have an account with us?\"\n</opening>\n\n<classification>\nBased on their response, classify as:\n\nNEW_SALES_LEAD:\n- \"looking for service\", \"need internet\", \"new business\", \"switching providers\", \"getting quotes\"\n- No existing account mentioned\n\nEXISTING_CUSTOMER:\n- \"I'm a customer\", \"have an account\", \"my service\", \"my bill\", mentions account number\n- References existing service\n\nRESIDENTIAL:\n- \"home internet\", \"my house\", \"residential\", \"personal account\"\n- Clearly not a business inquiry\n\nSCHEDULING_INTENT:\n- If they mention wanting to schedule, book, or talk to someone - treat as NEW_SALES_LEAD\n\nSTILL_UNCLEAR:\n- Ask ONE follow-up: \"Got it - is this for a business or for your home?\"\n</classification>\n\n<responses>\nNew lead: \"Perfect, I can help with that! Let me ask a few quick questions about what you're looking for.\"\n\nExisting customer: \"Got it, you're already with us. What can I help you with today?\"\n\nResidential: \"Ah, sounds like you need our residential team - I handle business accounts. For home service, check out xfinity.com.\"\n\nScheduling intent: Treat as new_sales_lead and proceed to help them schedule.\n\nNeed clarity: \"Just want to make sure I get you to the right place - is this for a business?\"\n</responses>\n\n<critical_rules>\n- ONE question at a time\n- NO links or phone numbers at this stage (except residential redirect to xfinity.com)\n- Just classify and hand off\n- Plain text only, no formatting\n- DO NOT attempt to answer questions about pricing, plans, or services\n</critical_rules>\n\n<faqs>\n{qa_pairs}\n</faqs>\n",
          "humanMessagePrompt": "",
          "messageHistory": "",
          "tools": [],
          "sequentialNode": [
            "{{seqCondition_0.data.instance}}"
          ],
          "model": "",
          "interrupt": "",
          "promptValues": "{\"brand_name\":\"$this.state.brand_name\",\"system_base\":\"$this.state.brand_system_base\",\"business_hours\":\"$this.state.brand_business_hours\",\"business_timezone\":\"$this.state.brand_business_timezone\",\"brand_voice_description\":\"$this.state.brand_voice_description\",\"additional_general_rules\":\"$this.state.additional_general_rules\",\"qa_pairs\":\"$this.state.qa_pairs\"}",
          "approvalPrompt": "You are about to execute tool: {tools}. Ask if user want to proceed",
          "approveButtonText": "Yes",
          "rejectButtonText": "No",
          "updateStateMemory": "updateStateMemoryUI",
          "maxIterations": ""
        },
        "outputAnchors": [
          {
            "id": "seqAgent_5-output-seqAgent-Agent",
            "name": "seqAgent",
            "label": "Agent",
            "description": "Agent that can execute tools",
            "type": "Agent"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 882,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": 1741.403538087748,
        "y": 1238.7602702143006
      }
    },
    {
      "id": "seqEnd_1",
      "position": {
        "x": 2248.3515110396993,
        "y": 1979.0170458784582
      },
      "type": "customNode",
      "data": {
        "id": "seqEnd_1",
        "label": "End",
        "version": 1,
        "name": "seqEnd",
        "type": "End",
        "baseClasses": [
          "End"
        ],
        "category": "Sequential Agents",
        "description": "End conversation",
        "inputParams": [],
        "inputAnchors": [
          {
            "label": "Agent | Condition | LLM | Tool Node",
            "name": "sequentialNode",
            "type": "Agent | Condition | LLMNode | ToolNode",
            "id": "seqEnd_1-input-sequentialNode-Agent | Condition | LLMNode | ToolNode"
          }
        ],
        "inputs": {
          "sequentialNode": "{{seqAgent_5.data.instance}}"
        },
        "outputAnchors": [],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 145,
      "positionAbsolute": {
        "x": 2248.3515110396993,
        "y": 1979.0170458784582
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "seqEnd_2",
      "position": {
        "x": 2719.770142299308,
        "y": 901.4157160193954
      },
      "type": "customNode",
      "data": {
        "id": "seqEnd_2",
        "label": "End",
        "version": 1,
        "name": "seqEnd",
        "type": "End",
        "baseClasses": [
          "End"
        ],
        "category": "Sequential Agents",
        "description": "End conversation",
        "inputParams": [],
        "inputAnchors": [
          {
            "label": "Agent | Condition | LLM | Tool Node",
            "name": "sequentialNode",
            "type": "Agent | Condition | LLMNode | ToolNode",
            "id": "seqEnd_2-input-sequentialNode-Agent | Condition | LLMNode | ToolNode"
          }
        ],
        "inputs": {
          "sequentialNode": "{{seqAgent_4.data.instance}}"
        },
        "outputAnchors": [],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 145,
      "positionAbsolute": {
        "x": 2719.770142299308,
        "y": 901.4157160193954
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "appDbAgentMemory_0",
      "position": {
        "x": -738.6598117016032,
        "y": -30.13461472114787
      },
      "type": "customNode",
      "data": {
        "id": "appDbAgentMemory_0",
        "label": "Agent Memory (App DB)",
        "version": 1,
        "name": "appDbAgentMemory",
        "type": "AgentMemory",
        "baseClasses": [
          "AgentMemory",
          "BaseCheckpointSaver"
        ],
        "category": "Memory",
        "description": "Memory for agentflow to remember the state of the conversation by app db",
        "inputParams": [],
        "inputAnchors": [],
        "inputs": {},
        "outputAnchors": [
          {
            "id": "appDbAgentMemory_0-output-appDbAgentMemory-AgentMemory|BaseCheckpointSaver",
            "name": "appDbAgentMemory",
            "label": "AgentMemory",
            "description": "Memory for agentflow to remember the state of the conversation by app db",
            "type": "AgentMemory | BaseCheckpointSaver"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 145,
      "selected": false,
      "positionAbsolute": {
        "x": -738.6598117016032,
        "y": -30.13461472114787
      },
      "dragging": false
    },
    {
      "id": "googleCustomSearch_0",
      "position": {
        "x": 1537.0845884637397,
        "y": -1569.0755176514733
      },
      "type": "customNode",
      "data": {
        "id": "googleCustomSearch_0",
        "label": "Google Custom Search",
        "version": 1,
        "name": "googleCustomSearch",
        "type": "GoogleCustomSearchAPI",
        "baseClasses": [
          "GoogleCustomSearchAPI",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Wrapper around Google Custom Search API - a real-time API to access Google search results",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "credentialNames": [
              "googleCustomSearchApi"
            ],
            "id": "googleCustomSearch_0-input-credential-credential"
          }
        ],
        "inputAnchors": [],
        "inputs": {},
        "outputAnchors": [
          {
            "id": "googleCustomSearch_0-output-googleCustomSearch-GoogleCustomSearchAPI|Tool|StructuredTool|Runnable",
            "name": "googleCustomSearch",
            "label": "GoogleCustomSearchAPI",
            "description": "Wrapper around Google Custom Search API - a real-time API to access Google search results",
            "type": "GoogleCustomSearchAPI | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 279,
      "positionAbsolute": {
        "x": 1537.0845884637397,
        "y": -1569.0755176514733
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "currentDateTime_0",
      "position": {
        "x": 1161.378900467283,
        "y": -1448.085407533697
      },
      "type": "customNode",
      "data": {
        "id": "currentDateTime_0",
        "label": "Current Date Time",
        "version": 1,
        "name": "currentDateTime",
        "type": "CurrentDateTime",
        "baseClasses": [
          "CurrentDateTime",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Get the current date and time.",
        "inputParams": [],
        "inputAnchors": [],
        "inputs": {},
        "outputAnchors": [
          {
            "id": "currentDateTime_0-output-currentDateTime-CurrentDateTime|Tool|StructuredTool|Runnable",
            "name": "currentDateTime",
            "label": "CurrentDateTime",
            "description": "Get the current date and time.",
            "type": "CurrentDateTime | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 145,
      "selected": false,
      "positionAbsolute": {
        "x": 1161.378900467283,
        "y": -1448.085407533697
      },
      "dragging": false
    },
    {
      "id": "postConsumerProfile_0",
      "position": {
        "x": 1953.2169263660066,
        "y": -1620.3649541152638
      },
      "type": "customNode",
      "data": {
        "id": "postConsumerProfile_0",
        "label": "Post Consumer Profile",
        "version": 1,
        "name": "postConsumerProfile",
        "type": "PostConsumerProfile",
        "baseClasses": [
          "PostConsumerProfile",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Post available information about consumer into Consumer profile",
        "inputParams": [],
        "inputAnchors": [],
        "inputs": {},
        "outputAnchors": [
          {
            "id": "postConsumerProfile_0-output-postConsumerProfile-PostConsumerProfile|Tool|StructuredTool|Runnable",
            "name": "postConsumerProfile",
            "label": "PostConsumerProfile",
            "description": "Post available information about consumer into Consumer profile",
            "type": "PostConsumerProfile | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 145,
      "selected": false,
      "positionAbsolute": {
        "x": 1953.2169263660066,
        "y": -1620.3649541152638
      },
      "dragging": false
    },
    {
      "id": "businessHoursChecker_0",
      "position": {
        "x": 1954.164305334274,
        "y": -1445.74918781421
      },
      "type": "customNode",
      "data": {
        "id": "businessHoursChecker_0",
        "label": "Business Hours Checker",
        "version": 1,
        "name": "businessHoursChecker",
        "type": "BusinessHoursChecker",
        "baseClasses": [
          "BusinessHoursChecker",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Validates if a user appointment time falls within business hours and converts it to the correct timezone format",
        "inputParams": [],
        "inputAnchors": [],
        "inputs": {},
        "outputAnchors": [
          {
            "id": "businessHoursChecker_0-output-businessHoursChecker-BusinessHoursChecker|Tool|StructuredTool|Runnable",
            "name": "businessHoursChecker",
            "label": "BusinessHoursChecker",
            "description": "Validates if a user appointment time falls within business hours and converts it to the correct timezone format",
            "type": "BusinessHoursChecker | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 145,
      "selected": false,
      "positionAbsolute": {
        "x": 1954.164305334274,
        "y": -1445.74918781421
      },
      "dragging": false
    },
    {
      "id": "ctaTool_0",
      "position": {
        "x": 1950.975651863234,
        "y": -1218.5446940612605
      },
      "type": "customNode",
      "data": {
        "id": "ctaTool_0",
        "label": "CTA Tool",
        "version": 2,
        "name": "ctaTool",
        "type": "CtaTool",
        "baseClasses": [
          "CtaTool",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Manage Call-To-Action SMS messages: schedule, cancel, reschedule, and list CTAs through Messaging Orchestrator.",
        "inputParams": [
          {
            "label": "Auth0 Credential",
            "name": "credential",
            "type": "credential",
            "credentialNames": [
              "auth0M2M"
            ],
            "id": "ctaTool_0-input-credential-credential"
          },
          {
            "label": "Conversation ID",
            "name": "conversationId",
            "type": "string",
            "description": "Messaging Orchestrator conversation identifier. Auto-populated from prediction request override_config.",
            "optional": true,
            "id": "ctaTool_0-input-conversationId-string"
          },
          {
            "label": "From Phone Number",
            "name": "from",
            "type": "string",
            "description": "E.164 formatted phone number used as the sender (e.g., +14155551234). Auto-populated from prediction request override_config.",
            "optional": true,
            "id": "ctaTool_0-input-from-string"
          },
          {
            "label": "To Phone Number",
            "name": "to",
            "type": "string",
            "description": "Target E.164 recipient (e.g., +15551234567). Auto-populated from prediction request override_config.",
            "optional": true,
            "id": "ctaTool_0-input-to-string"
          },
          {
            "label": "Send At",
            "name": "sendAt",
            "type": "string",
            "description": "REQUIRED: ISO8601 timestamp indicating when the CTA should send. You MUST analyze the consumer's request to determine the appropriate scheduled time. Examples:\n- \"remind me in 2 hours\" â†’ calculate current time + 2 hours â†’ \"2025-11-15T18:30:00Z\"\n- \"call me tomorrow at 3pm\" â†’ tomorrow's date at 15:00 â†’ \"2025-11-16T15:00:00Z\"\n- \"text me next Monday at noon\" â†’ next Monday at 12:00 â†’ \"2025-11-18T12:00:00Z\"\n- \"follow up in 30 minutes\" â†’ current time + 30 minutes â†’ \"2025-11-15T16:45:00Z\"\nThe datetime MUST be in the future (not in the past).",
            "id": "ctaTool_0-input-sendAt-string"
          },
          {
            "label": "CTA Metadata (JSON)",
            "name": "metadata",
            "type": "json",
            "description": "Optional JSON object merged into the CTA context (e.g., {\"cta_type\": \"follow_up\"}).",
            "optional": true,
            "id": "ctaTool_0-input-metadata-json"
          },
          {
            "label": "Messaging Orchestrator Base URL",
            "name": "messagingOrchestratorBaseUrl",
            "type": "string",
            "description": "Base URL for Messaging Orchestrator (e.g., https://messaging-orchestrator.invocadev.com).",
            "id": "ctaTool_0-input-messagingOrchestratorBaseUrl-string"
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "conversationId": "",
          "from": "",
          "to": "",
          "sendAt": "",
          "metadata": "",
          "messagingOrchestratorBaseUrl": "https://messaging-orchestrator.invoca.net"
        },
        "outputAnchors": [
          {
            "id": "ctaTool_0-output-ctaTool-CtaTool|Tool|StructuredTool|Runnable",
            "name": "ctaTool",
            "label": "CtaTool",
            "description": "Manage Call-To-Action SMS messages: schedule, cancel, reschedule, and list CTAs through Messaging Orchestrator.",
            "type": "CtaTool | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 889,
      "selected": false,
      "positionAbsolute": {
        "x": 1950.975651863234,
        "y": -1218.5446940612605
      },
      "dragging": false
    }
  ],
  "edges": [
    {
      "source": "seqState_0",
      "sourceHandle": "seqState_0-output-seqState-State",
      "target": "seqStart_0",
      "targetHandle": "seqStart_0-input-state-State",
      "type": "buttonedge",
      "id": "seqState_0-seqState_0-output-seqState-State-seqStart_0-seqStart_0-input-state-State"
    },
    {
      "source": "seqStart_0",
      "sourceHandle": "seqStart_0-output-seqStart-Start",
      "target": "seqLLMNode_0",
      "targetHandle": "seqLLMNode_0-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode",
      "type": "buttonedge",
      "id": "seqStart_0-seqStart_0-output-seqStart-Start-seqLLMNode_0-seqLLMNode_0-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode"
    },
    {
      "source": "seqLLMNode_0",
      "sourceHandle": "seqLLMNode_0-output-seqLLMNode-LLMNode",
      "target": "seqCondition_0",
      "targetHandle": "seqCondition_0-input-sequentialNode-Start | Agent | LLMNode | ToolNode",
      "type": "buttonedge",
      "id": "seqLLMNode_0-seqLLMNode_0-output-seqLLMNode-LLMNode-seqCondition_0-seqCondition_0-input-sequentialNode-Start | Agent | LLMNode | ToolNode"
    },
    {
      "source": "seqCondition_0",
      "sourceHandle": "seqCondition_0-output-existing_customer-Condition",
      "target": "seqAgent_4",
      "targetHandle": "seqAgent_4-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode",
      "type": "buttonedge",
      "id": "seqCondition_0-seqCondition_0-output-existing_customer-Condition-seqAgent_4-seqAgent_4-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode"
    },
    {
      "source": "seqCondition_0",
      "sourceHandle": "seqCondition_0-output-undetermined-Condition",
      "target": "seqAgent_5",
      "targetHandle": "seqAgent_5-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode",
      "type": "buttonedge",
      "id": "seqCondition_0-seqCondition_0-output-undetermined-Condition-seqAgent_5-seqAgent_5-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode"
    },
    {
      "source": "seqAgent_3",
      "sourceHandle": "seqAgent_3-output-seqAgent-Agent",
      "target": "seqEnd_3",
      "targetHandle": "seqEnd_3-input-sequentialNode-Agent | Condition | LLMNode | ToolNode",
      "type": "buttonedge",
      "id": "seqAgent_3-seqAgent_3-output-seqAgent-Agent-seqEnd_3-seqEnd_3-input-sequentialNode-Agent | Condition | LLMNode | ToolNode"
    },
    {
      "source": "seqAgent_4",
      "sourceHandle": "seqAgent_4-output-seqAgent-Agent",
      "target": "seqEnd_2",
      "targetHandle": "seqEnd_2-input-sequentialNode-Agent | Condition | LLMNode | ToolNode",
      "type": "buttonedge",
      "id": "seqAgent_4-seqAgent_4-output-seqAgent-Agent-seqEnd_2-seqEnd_2-input-sequentialNode-Agent | Condition | LLMNode | ToolNode"
    },
    {
      "source": "seqAgent_5",
      "sourceHandle": "seqAgent_5-output-seqAgent-Agent",
      "target": "seqEnd_1",
      "targetHandle": "seqEnd_1-input-sequentialNode-Agent | Condition | LLMNode | ToolNode",
      "type": "buttonedge",
      "id": "seqAgent_5-seqAgent_5-output-seqAgent-Agent-seqEnd_1-seqEnd_1-input-sequentialNode-Agent | Condition | LLMNode | ToolNode"
    },
    {
      "source": "appDbAgentMemory_0",
      "sourceHandle": "appDbAgentMemory_0-output-appDbAgentMemory-AgentMemory|BaseCheckpointSaver",
      "target": "seqStart_0",
      "targetHandle": "seqStart_0-input-agentMemory-BaseCheckpointSaver",
      "type": "buttonedge",
      "id": "appDbAgentMemory_0-appDbAgentMemory_0-output-appDbAgentMemory-AgentMemory|BaseCheckpointSaver-seqStart_0-seqStart_0-input-agentMemory-BaseCheckpointSaver"
    },
    {
      "source": "googleCustomSearch_0",
      "sourceHandle": "googleCustomSearch_0-output-googleCustomSearch-GoogleCustomSearchAPI|Tool|StructuredTool|Runnable",
      "target": "seqAgent_3",
      "targetHandle": "seqAgent_3-input-tools-Tool",
      "type": "buttonedge",
      "id": "googleCustomSearch_0-googleCustomSearch_0-output-googleCustomSearch-GoogleCustomSearchAPI|Tool|StructuredTool|Runnable-seqAgent_3-seqAgent_3-input-tools-Tool"
    },
    {
      "source": "googleCustomSearch_0",
      "sourceHandle": "googleCustomSearch_0-output-googleCustomSearch-GoogleCustomSearchAPI|Tool|StructuredTool|Runnable",
      "target": "seqAgent_4",
      "targetHandle": "seqAgent_4-input-tools-Tool",
      "type": "buttonedge",
      "id": "googleCustomSearch_0-googleCustomSearch_0-output-googleCustomSearch-GoogleCustomSearchAPI|Tool|StructuredTool|Runnable-seqAgent_4-seqAgent_4-input-tools-Tool"
    },
    {
      "source": "currentDateTime_0",
      "sourceHandle": "currentDateTime_0-output-currentDateTime-CurrentDateTime|Tool|StructuredTool|Runnable",
      "target": "seqAgent_3",
      "targetHandle": "seqAgent_3-input-tools-Tool",
      "type": "buttonedge",
      "id": "currentDateTime_0-currentDateTime_0-output-currentDateTime-CurrentDateTime|Tool|StructuredTool|Runnable-seqAgent_3-seqAgent_3-input-tools-Tool"
    },
    {
      "source": "currentDateTime_0",
      "sourceHandle": "currentDateTime_0-output-currentDateTime-CurrentDateTime|Tool|StructuredTool|Runnable",
      "target": "seqAgent_4",
      "targetHandle": "seqAgent_4-input-tools-Tool",
      "type": "buttonedge",
      "id": "currentDateTime_0-currentDateTime_0-output-currentDateTime-CurrentDateTime|Tool|StructuredTool|Runnable-seqAgent_4-seqAgent_4-input-tools-Tool"
    },
    {
      "source": "postConsumerProfile_0",
      "sourceHandle": "postConsumerProfile_0-output-postConsumerProfile-PostConsumerProfile|Tool|StructuredTool|Runnable",
      "target": "seqAgent_3",
      "targetHandle": "seqAgent_3-input-tools-Tool",
      "type": "buttonedge",
      "id": "postConsumerProfile_0-postConsumerProfile_0-output-postConsumerProfile-PostConsumerProfile|Tool|StructuredTool|Runnable-seqAgent_3-seqAgent_3-input-tools-Tool"
    },
    {
      "source": "businessHoursChecker_0",
      "sourceHandle": "businessHoursChecker_0-output-businessHoursChecker-BusinessHoursChecker|Tool|StructuredTool|Runnable",
      "target": "seqAgent_3",
      "targetHandle": "seqAgent_3-input-tools-Tool",
      "type": "buttonedge",
      "id": "businessHoursChecker_0-businessHoursChecker_0-output-businessHoursChecker-BusinessHoursChecker|Tool|StructuredTool|Runnable-seqAgent_3-seqAgent_3-input-tools-Tool"
    },
    {
      "source": "ChatBaseten_0",
      "sourceHandle": "ChatBaseten_0-output-ChatBaseten-ChatBaseten|BaseChatModel|BaseLanguageModel|Runnable",
      "target": "seqStart_0",
      "targetHandle": "seqStart_0-input-model-BaseChatModel",
      "type": "buttonedge",
      "id": "ChatBaseten_0-ChatBaseten_0-output-ChatBaseten-ChatBaseten|BaseChatModel|BaseLanguageModel|Runnable-seqStart_0-seqStart_0-input-model-BaseChatModel"
    },
    {
      "source": "seqCondition_0",
      "sourceHandle": "seqCondition_0-output-new_sales_lead-Condition",
      "target": "seqAgent_3",
      "targetHandle": "seqAgent_3-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode",
      "type": "buttonedge",
      "id": "seqCondition_0-seqCondition_0-output-new_sales_lead-Condition-seqAgent_3-seqAgent_3-input-sequentialNode-Start | Agent | Condition | LLMNode | ToolNode"
    }
  ]
}